<script>
    setInterval(() => {
        document.querySelector('#timer').innerHTML = new Date().toLocaleString('en-US', { day: 'numeric', month: 'long', year: 'numeric', hour: 'numeric', minute: 'numeric' });
    }, 1000);

    function dropdownClick() {
        $('.header-dropdown .fa-caret-down').toggleClass('rotate');
        $('.header-dropdown .dropdown-content').slideToggle(100, function () {
            document.getElementById('mydropdown').classList.toggle('show');
        });
    }
    window.onclick = function (event) {
        if (!event.target.matches('.fa-caret-down')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                    $('.header-dropdown .dropdown-content').slideUp(50, function () {
                        openDropdown.classList.remove('show');
                        $('.header-dropdown i').toggleClass('rotate');
                    })
                }
            }
        }
    }
</script>

<link rel="stylesheet" href="/css/header.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
    integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">

<header>
    <% if (username !=='admin' ) { %>
        <div class="hamburger-menu">
            <span class="fa-solid fa-bars menu"></span>
        </div>
        <% } %>
            <div class="header">
                <div class="header-content">
                    <img src="/LMS-Logo.png" alt="LMS Logo" />
                </div>
                <div class="settings-panel">
                    <p id="timer"></p>
                    <img src="../../<%= profileImage %>" alt="profile pic" />
                    <div class="header-dropdown">
                        <% if (username !=='admin' ) { %>
                            <i onclick="dropdownClick()" class="fa-solid fa-caret-down"></i>
                            <div id="mydropdown" class="dropdown-content">
                                <a href="/student/dashboard">
                                    <div id="dropFirst"><span class="fa-solid fa-house" aria-hidden="true"></span></div>
                                    Dashboard
                                </a>
                                <a href="/student/my">
                                    <div id="dropSecond"><span class="fa fa-user" aria-hidden="true"></span></div>
                                    Profile
                                </a>
                                <a href="/logout">
                                    <div><span class="fas fa-unlock" aria-hidden="true"></span></div>Logout
                                </a>
                            </div>
                            <% } %>
                    </div>
                </div>
            </div>
</header>